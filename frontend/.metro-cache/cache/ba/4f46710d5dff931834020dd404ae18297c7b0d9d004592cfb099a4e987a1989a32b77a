{"dependencies":[{"name":"../../skia/core/AnimatedImage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"LhU/Px6ZGN7Mh77TF9+qamLywNY=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":36,"index":102}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAnimatedImageValue\", {\n    enumerable: true,\n    get: function () {\n      return useAnimatedImageValue;\n    }\n  });\n  var _skiaCoreAnimatedImage = require(_dependencyMap[0], \"../../skia/core/AnimatedImage\");\n  var _ReanimatedProxy = require(_dependencyMap[1], \"./ReanimatedProxy\");\n  var Rea = _interopDefault(_ReanimatedProxy);\n  const DEFAULT_FRAME_DURATION = 60;\n  const _worklet_8279287978886_init_data = {\n    code: \"function shopify_useAnimatedImageValueJs1(frameInfo){const{animatedImage,currentFrame,isPaused,lastTimestamp,frameDuration}=this.__closure;if(!animatedImage){currentFrame.value=null;return;}if(isPaused.value&&lastTimestamp.value!==-1){return;}const{timestamp:timestamp}=frameInfo;const elapsed=timestamp-lastTimestamp.value;if(elapsed<frameDuration){return;}animatedImage.decodeNextFrame();const oldFrame=currentFrame.value;currentFrame.value=animatedImage.getCurrentFrame();if(oldFrame){oldFrame.dispose();}lastTimestamp.value=timestamp;}\",\n    location: \"/app/frontend/node_modules/@shopify/react-native-skia/lib/module/external/reanimated/useAnimatedImageValue.js\",\n    sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"shopify_useAnimatedImageValueJs1\\\",\\\"frameInfo\\\",\\\"animatedImage\\\",\\\"currentFrame\\\",\\\"isPaused\\\",\\\"lastTimestamp\\\",\\\"frameDuration\\\",\\\"__closure\\\",\\\"value\\\",\\\"timestamp\\\",\\\"elapsed\\\",\\\"decodeNextFrame\\\",\\\"oldFrame\\\",\\\"getCurrentFrame\\\",\\\"dispose\\\"],\\\"sources\\\":[\\\"/app/frontend/node_modules/@shopify/react-native-skia/lib/module/external/reanimated/useAnimatedImageValue.js\\\"],\\\"mappings\\\":\\\"AAauB,SAAAA,gCAAaA,CAAAC,SAAA,QAAAC,aAAA,CAAAC,YAAA,CAAAC,QAAA,CAAAC,aAAA,CAAAC,aAAA,OAAAC,SAAA,CAChC,GAAI,CAACL,aAAa,CAAE,CAClBC,YAAY,CAACK,KAAK,CAAG,IAAI,CACzB,OACF,CACA,GAAIJ,QAAQ,CAACI,KAAK,EAAIH,aAAa,CAACG,KAAK,GAAK,CAAC,CAAC,CAAE,CAChD,OACF,CACA,KAAM,CACJC,SAAA,CAAAA,SACF,CAAC,CAAGR,SAAS,CACb,KAAM,CAAAS,OAAO,CAAGD,SAAS,CAAGJ,aAAa,CAACG,KAAK,CAG/C,GAAIE,OAAO,CAAGJ,aAAa,CAAE,CAC3B,OACF,CAGAJ,aAAa,CAACS,eAAe,CAAC,CAAC,CAC/B,KAAM,CAAAC,QAAQ,CAAGT,YAAY,CAACK,KAAK,CACnCL,YAAY,CAACK,KAAK,CAAGN,aAAa,CAACW,eAAe,CAAC,CAAC,CACpD,GAAID,QAAQ,CAAE,CACZA,QAAQ,CAACE,OAAO,CAAC,CAAC,CACpB,CAGAT,aAAa,CAACG,KAAK,CAAGC,SAAS,CACjC\\\",\\\"ignoreList\\\":[]}\",\n    version: \"3.17.5\"\n  };\n  const useAnimatedImageValue = (source, paused) => {\n    const defaultPaused = Rea.default.useSharedValue(false);\n    const isPaused = paused !== null && paused !== void 0 ? paused : defaultPaused;\n    const currentFrame = Rea.default.useSharedValue(null);\n    const lastTimestamp = Rea.default.useSharedValue(-1);\n    const animatedImage = (0, _skiaCoreAnimatedImage.useAnimatedImage)(source, err => {\n      console.error(err);\n      throw new Error(`Could not load animated image - got '${err.message}'`);\n    });\n    const frameDuration = (animatedImage === null || animatedImage === void 0 ? void 0 : animatedImage.currentFrameDuration()) || DEFAULT_FRAME_DURATION;\n    Rea.default.useFrameCallback(function () {\n      const _e = [new global.Error(), -6, -27];\n      const shopify_useAnimatedImageValueJs1 = function (frameInfo) {\n        if (!animatedImage) {\n          currentFrame.value = null;\n          return;\n        }\n        if (isPaused.value && lastTimestamp.value !== -1) {\n          return;\n        }\n        const {\n          timestamp\n        } = frameInfo;\n        const elapsed = timestamp - lastTimestamp.value;\n\n        // Check if it's time to switch frames based on GIF frame duration\n        if (elapsed < frameDuration) {\n          return;\n        }\n\n        // Update the current frame\n        animatedImage.decodeNextFrame();\n        const oldFrame = currentFrame.value;\n        currentFrame.value = animatedImage.getCurrentFrame();\n        if (oldFrame) {\n          oldFrame.dispose();\n        }\n\n        // Update the last timestamp\n        lastTimestamp.value = timestamp;\n      };\n      shopify_useAnimatedImageValueJs1.__closure = {\n        animatedImage,\n        currentFrame,\n        isPaused,\n        lastTimestamp,\n        frameDuration\n      };\n      shopify_useAnimatedImageValueJs1.__workletHash = 8279287978886;\n      shopify_useAnimatedImageValueJs1.__initData = _worklet_8279287978886_init_data;\n      shopify_useAnimatedImageValueJs1.__stackDetails = _e;\n      return shopify_useAnimatedImageValueJs1;\n    }());\n    return currentFrame;\n  };\n});","lineCount":83,"map":[[12,2,4,0,"Object"],[12,8,4,0],[12,9,4,0,"defineProperty"],[12,23,4,0],[12,24,4,0,"exports"],[12,31,4,0],[13,4,4,0,"enumerable"],[13,14,4,0],[14,4,4,0,"get"],[14,7,4,0],[14,18,4,0,"get"],[14,19,4,0],[15,6,4,0],[15,13,4,0,"useAnimatedImageValue"],[15,34,4,0],[16,4,4,0],[17,2,4,0],[18,2,1,0],[18,6,1,0,"_skiaCoreAnimatedImage"],[18,28,1,0],[18,31,1,0,"require"],[18,38,1,0],[18,39,1,0,"_dependencyMap"],[18,53,1,0],[19,2,2,0],[19,6,2,0,"_ReanimatedProxy"],[19,22,2,0],[19,25,2,0,"require"],[19,32,2,0],[19,33,2,0,"_dependencyMap"],[19,47,2,0],[20,2,2,0],[20,6,2,0,"Rea"],[20,9,2,0],[20,12,2,0,"_interopDefault"],[20,27,2,0],[20,28,2,0,"_ReanimatedProxy"],[20,44,2,0],[21,2,3,0],[21,8,3,6,"DEFAULT_FRAME_DURATION"],[21,30,3,28],[21,33,3,31],[21,35,3,33],[22,2,3,34],[22,8,3,34,"_worklet_8279287978886_init_data"],[22,40,3,34],[23,4,3,34,"code"],[23,8,3,34],[24,4,3,34,"location"],[24,12,3,34],[25,4,3,34,"sourceMap"],[25,13,3,34],[26,4,3,34,"version"],[26,11,3,34],[27,2,3,34],[28,2,4,7],[28,8,4,13,"useAnimatedImageValue"],[28,29,4,34],[28,32,4,37,"useAnimatedImageValue"],[28,33,4,38,"source"],[28,39,4,44],[28,41,4,46,"paused"],[28,47,4,52],[28,52,4,57],[29,4,5,2],[29,10,5,8,"defaultPaused"],[29,23,5,21],[29,26,5,24,"Rea"],[29,29,5,27],[29,30,5,27,"default"],[29,37,5,27],[29,38,5,28,"useSharedValue"],[29,52,5,42],[29,53,5,43],[29,58,5,48],[29,59,5,49],[30,4,6,2],[30,10,6,8,"isPaused"],[30,18,6,16],[30,21,6,19,"paused"],[30,27,6,25],[30,32,6,30],[30,36,6,34],[30,40,6,38,"paused"],[30,46,6,44],[30,51,6,49],[30,56,6,54],[30,57,6,55],[30,60,6,58,"paused"],[30,66,6,64],[30,69,6,67,"defaultPaused"],[30,82,6,80],[31,4,7,2],[31,10,7,8,"currentFrame"],[31,22,7,20],[31,25,7,23,"Rea"],[31,28,7,26],[31,29,7,26,"default"],[31,36,7,26],[31,37,7,27,"useSharedValue"],[31,51,7,41],[31,52,7,42],[31,56,7,46],[31,57,7,47],[32,4,8,2],[32,10,8,8,"lastTimestamp"],[32,23,8,21],[32,26,8,24,"Rea"],[32,29,8,27],[32,30,8,27,"default"],[32,37,8,27],[32,38,8,28,"useSharedValue"],[32,52,8,42],[32,53,8,43],[32,54,8,44],[32,55,8,45],[32,56,8,46],[33,4,9,2],[33,10,9,8,"animatedImage"],[33,23,9,21],[33,26,9,24],[33,30,9,24,"useAnimatedImage"],[33,52,9,40],[33,53,9,40,"useAnimatedImage"],[33,69,9,40],[33,71,9,41,"source"],[33,77,9,47],[33,79,9,49,"err"],[33,82,9,52],[33,86,9,56],[34,6,10,4,"console"],[34,13,10,11],[34,14,10,12,"error"],[34,19,10,17],[34,20,10,18,"err"],[34,23,10,21],[34,24,10,22],[35,6,11,4],[35,12,11,10],[35,16,11,14,"Error"],[35,21,11,19],[35,22,11,20],[35,62,11,60,"err"],[35,65,11,63],[35,66,11,64,"message"],[35,73,11,71],[35,76,11,74],[35,77,11,75],[36,4,12,2],[36,5,12,3],[36,6,12,4],[37,4,13,2],[37,10,13,8,"frameDuration"],[37,23,13,21],[37,26,13,24],[37,27,13,25,"animatedImage"],[37,40,13,38],[37,45,13,43],[37,49,13,47],[37,53,13,51,"animatedImage"],[37,66,13,64],[37,71,13,69],[37,76,13,74],[37,77,13,75],[37,80,13,78],[37,85,13,83],[37,86,13,84],[37,89,13,87,"animatedImage"],[37,102,13,100],[37,103,13,101,"currentFrameDuration"],[37,123,13,121],[37,124,13,122],[37,125,13,123],[37,130,13,128,"DEFAULT_FRAME_DURATION"],[37,152,13,150],[38,4,14,2,"Rea"],[38,7,14,5],[38,8,14,5,"default"],[38,15,14,5],[38,16,14,6,"useFrameCallback"],[38,32,14,22],[38,33,14,23],[39,6,14,23],[39,12,14,23,"_e"],[39,14,14,23],[39,22,14,23,"global"],[39,28,14,23],[39,29,14,23,"Error"],[39,34,14,23],[40,6,14,23],[40,12,14,23,"shopify_useAnimatedImageValueJs1"],[40,44,14,23],[40,56,14,23,"shopify_useAnimatedImageValueJs1"],[40,57,14,23,"frameInfo"],[40,66,14,32],[40,68,14,36],[41,8,15,4],[41,12,15,8],[41,13,15,9,"animatedImage"],[41,26,15,22],[41,28,15,24],[42,10,16,6,"currentFrame"],[42,22,16,18],[42,23,16,19,"value"],[42,28,16,24],[42,31,16,27],[42,35,16,31],[43,10,17,6],[44,8,18,4],[45,8,19,4],[45,12,19,8,"isPaused"],[45,20,19,16],[45,21,19,17,"value"],[45,26,19,22],[45,30,19,26,"lastTimestamp"],[45,43,19,39],[45,44,19,40,"value"],[45,49,19,45],[45,54,19,50],[45,55,19,51],[45,56,19,52],[45,58,19,54],[46,10,20,6],[47,8,21,4],[48,8,22,4],[48,14,22,10],[49,10,23,6,"timestamp"],[50,8,24,4],[50,9,24,5],[50,12,24,8,"frameInfo"],[50,21,24,17],[51,8,25,4],[51,14,25,10,"elapsed"],[51,21,25,17],[51,24,25,20,"timestamp"],[51,33,25,29],[51,36,25,32,"lastTimestamp"],[51,49,25,45],[51,50,25,46,"value"],[51,55,25,51],[53,8,27,4],[54,8,28,4],[54,12,28,8,"elapsed"],[54,19,28,15],[54,22,28,18,"frameDuration"],[54,35,28,31],[54,37,28,33],[55,10,29,6],[56,8,30,4],[58,8,32,4],[59,8,33,4,"animatedImage"],[59,21,33,17],[59,22,33,18,"decodeNextFrame"],[59,37,33,33],[59,38,33,34],[59,39,33,35],[60,8,34,4],[60,14,34,10,"oldFrame"],[60,22,34,18],[60,25,34,21,"currentFrame"],[60,37,34,33],[60,38,34,34,"value"],[60,43,34,39],[61,8,35,4,"currentFrame"],[61,20,35,16],[61,21,35,17,"value"],[61,26,35,22],[61,29,35,25,"animatedImage"],[61,42,35,38],[61,43,35,39,"getCurrentFrame"],[61,58,35,54],[61,59,35,55],[61,60,35,56],[62,8,36,4],[62,12,36,8,"oldFrame"],[62,20,36,16],[62,22,36,18],[63,10,37,6,"oldFrame"],[63,18,37,14],[63,19,37,15,"dispose"],[63,26,37,22],[63,27,37,23],[63,28,37,24],[64,8,38,4],[66,8,40,4],[67,8,41,4,"lastTimestamp"],[67,21,41,17],[67,22,41,18,"value"],[67,27,41,23],[67,30,41,26,"timestamp"],[67,39,41,35],[68,6,42,2],[68,7,42,3],[69,6,42,3,"shopify_useAnimatedImageValueJs1"],[69,38,42,3],[69,39,42,3,"__closure"],[69,48,42,3],[70,8,42,3,"animatedImage"],[70,21,42,3],[71,8,42,3,"currentFrame"],[71,20,42,3],[72,8,42,3,"isPaused"],[72,16,42,3],[73,8,42,3,"lastTimestamp"],[73,21,42,3],[74,8,42,3,"frameDuration"],[75,6,42,3],[76,6,42,3,"shopify_useAnimatedImageValueJs1"],[76,38,42,3],[76,39,42,3,"__workletHash"],[76,52,42,3],[77,6,42,3,"shopify_useAnimatedImageValueJs1"],[77,38,42,3],[77,39,42,3,"__initData"],[77,49,42,3],[77,52,42,3,"_worklet_8279287978886_init_data"],[77,84,42,3],[78,6,42,3,"shopify_useAnimatedImageValueJs1"],[78,38,42,3],[78,39,42,3,"__stackDetails"],[78,53,42,3],[78,56,42,3,"_e"],[78,58,42,3],[79,6,42,3],[79,13,42,3,"shopify_useAnimatedImageValueJs1"],[79,45,42,3],[80,4,42,3],[80,5,14,23],[80,7,42,3],[80,8,42,4],[81,4,43,2],[81,11,43,9,"currentFrame"],[81,23,43,21],[82,2,44,0],[82,3,44,1],[83,0,44,2],[83,3]],"functionMap":{"names":["<global>","useAnimatedImageValue","useAnimatedImage$argument_1","Rea.useFrameCallback$argument_0"],"mappings":"AAA;qCCG;iDCK;GDG;uBEE;GF4B;CDE"},"hasCjsExports":false},"type":"js/module"}]}