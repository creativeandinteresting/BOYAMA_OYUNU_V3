{"dependencies":[{"name":"../../skia/core/AnimatedImage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":72},"end":{"line":3,"column":65,"index":137}}],"key":"LhU/Px6ZGN7Mh77TF9+qamLywNY=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":205},"end":{"line":6,"column":36,"index":241}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAnimatedImageValue\", {\n    enumerable: true,\n    get: function () {\n      return useAnimatedImageValue;\n    }\n  });\n  var _skiaCoreAnimatedImage = require(_dependencyMap[0], \"../../skia/core/AnimatedImage\");\n  var _ReanimatedProxy = require(_dependencyMap[1], \"./ReanimatedProxy\");\n  var Rea = _interopDefault(_ReanimatedProxy);\n  var DEFAULT_FRAME_DURATION = 60;\n  var _worklet_10511549111576_init_data = {\n    code: \"function shopify_useAnimatedImageValueTs1(frameInfo){const{animatedImage,currentFrame,isPaused,lastTimestamp,frameDuration}=this.__closure;if(!animatedImage){currentFrame.value=null;return;}if(isPaused.value&&lastTimestamp.value!==-1){return;}const{timestamp:timestamp}=frameInfo;const elapsed=timestamp-lastTimestamp.value;if(elapsed<frameDuration){return;}animatedImage.decodeNextFrame();const oldFrame=currentFrame.value;currentFrame.value=animatedImage.getCurrentFrame();if(oldFrame){oldFrame.dispose();}lastTimestamp.value=timestamp;}\",\n    location: \"/app/frontend/node_modules/@shopify/react-native-skia/src/external/reanimated/useAnimatedImageValue.ts\",\n    sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"shopify_useAnimatedImageValueTs1\\\",\\\"frameInfo\\\",\\\"animatedImage\\\",\\\"currentFrame\\\",\\\"isPaused\\\",\\\"lastTimestamp\\\",\\\"frameDuration\\\",\\\"__closure\\\",\\\"value\\\",\\\"timestamp\\\",\\\"elapsed\\\",\\\"decodeNextFrame\\\",\\\"oldFrame\\\",\\\"getCurrentFrame\\\",\\\"dispose\\\"],\\\"sources\\\":[\\\"/app/frontend/node_modules/@shopify/react-native-skia/src/external/reanimated/useAnimatedImageValue.ts\\\"],\\\"mappings\\\":\\\"AAwBuB,QAAC,CAAAA,gCAAyBA,CAAAC,SAAA,QAAAC,aAAA,CAAAC,YAAA,CAAAC,QAAA,CAAAC,aAAA,CAAAC,aAAA,OAAAC,SAAA,CAC7C,GAAI,CAACL,aAAa,CAAE,CAClBC,YAAY,CAACK,KAAK,CAAG,IAAI,CACzB,OACF,CACA,GAAIJ,QAAQ,CAACI,KAAK,EAAIH,aAAa,CAACG,KAAK,GAAK,CAAC,CAAC,CAAE,CAChD,OACF,CACA,KAAM,CAAEC,SAAA,CAAAA,SAAU,CAAC,CAAGR,SAAS,CAC/B,KAAM,CAAAS,OAAO,CAAGD,SAAS,CAAGJ,aAAa,CAACG,KAAK,CAG/C,GAAIE,OAAO,CAAGJ,aAAa,CAAE,CAC3B,OACF,CAGAJ,aAAa,CAACS,eAAe,CAAC,CAAC,CAC/B,KAAM,CAAAC,QAAQ,CAAGT,YAAY,CAACK,KAAK,CACnCL,YAAY,CAACK,KAAK,CAAGN,aAAa,CAACW,eAAe,CAAC,CAAC,CACpD,GAAID,QAAQ,CAAE,CACZA,QAAQ,CAACE,OAAO,CAAC,CAAC,CACpB,CAGAT,aAAa,CAACG,KAAK,CAAGC,SAAS,CACjC\\\",\\\"ignoreList\\\":[]}\",\n    version: \"3.17.5\"\n  };\n  var useAnimatedImageValue = (source, paused) => {\n    var defaultPaused = Rea.default.useSharedValue(false);\n    var isPaused = paused ?? defaultPaused;\n    var currentFrame = Rea.default.useSharedValue(null);\n    var lastTimestamp = Rea.default.useSharedValue(-1);\n    var animatedImage = (0, _skiaCoreAnimatedImage.useAnimatedImage)(source, err => {\n      console.error(err);\n      throw new Error(`Could not load animated image - got '${err.message}'`);\n    });\n    var frameDuration = animatedImage?.currentFrameDuration() || DEFAULT_FRAME_DURATION;\n    Rea.default.useFrameCallback(function () {\n      var _e = [new global.Error(), -6, -27];\n      var shopify_useAnimatedImageValueTs1 = function (frameInfo) {\n        if (!animatedImage) {\n          currentFrame.value = null;\n          return;\n        }\n        if (isPaused.value && lastTimestamp.value !== -1) {\n          return;\n        }\n        var timestamp = frameInfo.timestamp;\n        var elapsed = timestamp - lastTimestamp.value;\n\n        // Check if it's time to switch frames based on GIF frame duration\n        if (elapsed < frameDuration) {\n          return;\n        }\n\n        // Update the current frame\n        animatedImage.decodeNextFrame();\n        var oldFrame = currentFrame.value;\n        currentFrame.value = animatedImage.getCurrentFrame();\n        if (oldFrame) {\n          oldFrame.dispose();\n        }\n\n        // Update the last timestamp\n        lastTimestamp.value = timestamp;\n      };\n      shopify_useAnimatedImageValueTs1.__closure = {\n        animatedImage,\n        currentFrame,\n        isPaused,\n        lastTimestamp,\n        frameDuration\n      };\n      shopify_useAnimatedImageValueTs1.__workletHash = 10511549111576;\n      shopify_useAnimatedImageValueTs1.__initData = _worklet_10511549111576_init_data;\n      shopify_useAnimatedImageValueTs1.__stackDetails = _e;\n      return shopify_useAnimatedImageValueTs1;\n    }());\n    return currentFrame;\n  };\n});","lineCount":81,"map":[[12,2,10,0,"Object"],[12,8,10,0],[12,9,10,0,"defineProperty"],[12,23,10,0],[12,24,10,0,"exports"],[12,31,10,0],[13,4,10,0,"enumerable"],[13,14,10,0],[14,4,10,0,"get"],[14,7,10,0],[14,18,10,0,"get"],[14,19,10,0],[15,6,10,0],[15,13,10,0,"useAnimatedImageValue"],[15,34,10,0],[16,4,10,0],[17,2,10,0],[18,2,3,0],[18,6,3,0,"_skiaCoreAnimatedImage"],[18,28,3,0],[18,31,3,0,"require"],[18,38,3,0],[18,39,3,0,"_dependencyMap"],[18,53,3,0],[19,2,6,0],[19,6,6,0,"_ReanimatedProxy"],[19,22,6,0],[19,25,6,0,"require"],[19,32,6,0],[19,33,6,0,"_dependencyMap"],[19,47,6,0],[20,2,6,0],[20,6,6,0,"Rea"],[20,9,6,0],[20,12,6,0,"_interopDefault"],[20,27,6,0],[20,28,6,0,"_ReanimatedProxy"],[20,44,6,0],[21,2,8,0],[21,6,8,6,"DEFAULT_FRAME_DURATION"],[21,28,8,28],[21,31,8,31],[21,33,8,33],[22,2,8,34],[22,6,8,34,"_worklet_10511549111576_init_data"],[22,39,8,34],[23,4,8,34,"code"],[23,8,8,34],[24,4,8,34,"location"],[24,12,8,34],[25,4,8,34,"sourceMap"],[25,13,8,34],[26,4,8,34,"version"],[26,11,8,34],[27,2,8,34],[28,2,10,7],[28,6,10,13,"useAnimatedImageValue"],[28,27,10,34],[28,30,10,37,"useAnimatedImageValue"],[28,31,11,2,"source"],[28,37,11,25],[28,39,12,2,"paused"],[28,45,12,31],[28,50,13,5],[29,4,14,2],[29,8,14,8,"defaultPaused"],[29,21,14,21],[29,24,14,24,"Rea"],[29,27,14,27],[29,28,14,27,"default"],[29,35,14,27],[29,36,14,28,"useSharedValue"],[29,50,14,42],[29,51,14,43],[29,56,14,48],[29,57,14,49],[30,4,15,2],[30,8,15,8,"isPaused"],[30,16,15,16],[30,19,15,19,"paused"],[30,25,15,25],[30,29,15,29,"defaultPaused"],[30,42,15,42],[31,4,16,2],[31,8,16,8,"currentFrame"],[31,20,16,20],[31,23,16,23,"Rea"],[31,26,16,26],[31,27,16,26,"default"],[31,34,16,26],[31,35,16,27,"useSharedValue"],[31,49,16,41],[31,50,16,58],[31,54,16,62],[31,55,16,63],[32,4,17,2],[32,8,17,8,"lastTimestamp"],[32,21,17,21],[32,24,17,24,"Rea"],[32,27,17,27],[32,28,17,27,"default"],[32,35,17,27],[32,36,17,28,"useSharedValue"],[32,50,17,42],[32,51,17,43],[32,52,17,44],[32,53,17,45],[32,54,17,46],[33,4,18,2],[33,8,18,8,"animatedImage"],[33,21,18,21],[33,24,18,24],[33,28,18,24,"useAnimatedImage"],[33,50,18,40],[33,51,18,40,"useAnimatedImage"],[33,67,18,40],[33,69,18,41,"source"],[33,75,18,47],[33,77,18,50,"err"],[33,80,18,53],[33,84,18,58],[34,6,19,4,"console"],[34,13,19,11],[34,14,19,12,"error"],[34,19,19,17],[34,20,19,18,"err"],[34,23,19,21],[34,24,19,22],[35,6,20,4],[35,12,20,10],[35,16,20,14,"Error"],[35,21,20,19],[35,22,20,20],[35,62,20,60,"err"],[35,65,20,63],[35,66,20,64,"message"],[35,73,20,71],[35,76,20,74],[35,77,20,75],[36,4,21,2],[36,5,21,3],[36,6,21,4],[37,4,22,2],[37,8,22,8,"frameDuration"],[37,21,22,21],[37,24,23,4,"animatedImage"],[37,37,23,17],[37,39,23,19,"currentFrameDuration"],[37,59,23,39],[37,60,23,40],[37,61,23,41],[37,65,23,45,"DEFAULT_FRAME_DURATION"],[37,87,23,67],[38,4,25,2,"Rea"],[38,7,25,5],[38,8,25,5,"default"],[38,15,25,5],[38,16,25,6,"useFrameCallback"],[38,32,25,22],[38,33,25,23],[39,6,25,23],[39,10,25,23,"_e"],[39,12,25,23],[39,20,25,23,"global"],[39,26,25,23],[39,27,25,23,"Error"],[39,32,25,23],[40,6,25,23],[40,10,25,23,"shopify_useAnimatedImageValueTs1"],[40,42,25,23],[40,54,25,23,"shopify_useAnimatedImageValueTs1"],[40,55,25,24,"frameInfo"],[40,64,25,44],[40,66,25,49],[41,8,26,4],[41,12,26,8],[41,13,26,9,"animatedImage"],[41,26,26,22],[41,28,26,24],[42,10,27,6,"currentFrame"],[42,22,27,18],[42,23,27,19,"value"],[42,28,27,24],[42,31,27,27],[42,35,27,31],[43,10,28,6],[44,8,29,4],[45,8,30,4],[45,12,30,8,"isPaused"],[45,20,30,16],[45,21,30,17,"value"],[45,26,30,22],[45,30,30,26,"lastTimestamp"],[45,43,30,39],[45,44,30,40,"value"],[45,49,30,45],[45,54,30,50],[45,55,30,51],[45,56,30,52],[45,58,30,54],[46,10,31,6],[47,8,32,4],[48,8,33,4],[48,12,33,12,"timestamp"],[48,21,33,21],[48,24,33,26,"frameInfo"],[48,33,33,35],[48,34,33,12,"timestamp"],[48,43,33,21],[49,8,34,4],[49,12,34,10,"elapsed"],[49,19,34,17],[49,22,34,20,"timestamp"],[49,31,34,29],[49,34,34,32,"lastTimestamp"],[49,47,34,45],[49,48,34,46,"value"],[49,53,34,51],[51,8,36,4],[52,8,37,4],[52,12,37,8,"elapsed"],[52,19,37,15],[52,22,37,18,"frameDuration"],[52,35,37,31],[52,37,37,33],[53,10,38,6],[54,8,39,4],[56,8,41,4],[57,8,42,4,"animatedImage"],[57,21,42,17],[57,22,42,18,"decodeNextFrame"],[57,37,42,33],[57,38,42,34],[57,39,42,35],[58,8,43,4],[58,12,43,10,"oldFrame"],[58,20,43,18],[58,23,43,21,"currentFrame"],[58,35,43,33],[58,36,43,34,"value"],[58,41,43,39],[59,8,44,4,"currentFrame"],[59,20,44,16],[59,21,44,17,"value"],[59,26,44,22],[59,29,44,25,"animatedImage"],[59,42,44,38],[59,43,44,39,"getCurrentFrame"],[59,58,44,54],[59,59,44,55],[59,60,44,56],[60,8,45,4],[60,12,45,8,"oldFrame"],[60,20,45,16],[60,22,45,18],[61,10,46,6,"oldFrame"],[61,18,46,14],[61,19,46,15,"dispose"],[61,26,46,22],[61,27,46,23],[61,28,46,24],[62,8,47,4],[64,8,49,4],[65,8,50,4,"lastTimestamp"],[65,21,50,17],[65,22,50,18,"value"],[65,27,50,23],[65,30,50,26,"timestamp"],[65,39,50,35],[66,6,51,2],[66,7,51,3],[67,6,51,3,"shopify_useAnimatedImageValueTs1"],[67,38,51,3],[67,39,51,3,"__closure"],[67,48,51,3],[68,8,51,3,"animatedImage"],[68,21,51,3],[69,8,51,3,"currentFrame"],[69,20,51,3],[70,8,51,3,"isPaused"],[70,16,51,3],[71,8,51,3,"lastTimestamp"],[71,21,51,3],[72,8,51,3,"frameDuration"],[73,6,51,3],[74,6,51,3,"shopify_useAnimatedImageValueTs1"],[74,38,51,3],[74,39,51,3,"__workletHash"],[74,52,51,3],[75,6,51,3,"shopify_useAnimatedImageValueTs1"],[75,38,51,3],[75,39,51,3,"__initData"],[75,49,51,3],[75,52,51,3,"_worklet_10511549111576_init_data"],[75,85,51,3],[76,6,51,3,"shopify_useAnimatedImageValueTs1"],[76,38,51,3],[76,39,51,3,"__stackDetails"],[76,53,51,3],[76,56,51,3,"_e"],[76,58,51,3],[77,6,51,3],[77,13,51,3,"shopify_useAnimatedImageValueTs1"],[77,45,51,3],[78,4,51,3],[78,5,25,23],[78,7,51,3],[78,8,51,4],[79,4,52,2],[79,11,52,9,"currentFrame"],[79,23,52,21],[80,2,53,0],[80,3,53,1],[81,0,53,2],[81,3]],"functionMap":{"names":["<global>","useAnimatedImageValue","useAnimatedImage$argument_1","Rea.useFrameCallback$argument_0"],"mappings":"AAA;qCCS;iDCQ;GDG;uBEI;GF0B;CDE"},"hasCjsExports":false},"type":"js/module"}]}